services:
  hardhat:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8545:8545" # Map the Hardhat node port to the host
    volumes:
      - .:/app # Mount the current directory to the container
    stdin_open: true
    tty: true
    command: ["bash"] # Default command to keep the container interactive

  compile:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - .:/app
    command: ["npx", "hardhat", "compile"]

  test:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - .:/app
    command: ["npx", "hardhat", "test"]

  run:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8545:8545"
    volumes:
      - .:/app
    command: ["npx", "hardhat", "node"]